(function(t) {
    "use strict";
    t.fn.captcha = function(a) {
        var e = t.extend({
                idCaptchaText: "captchaText",
                idCaptchaInput: "captchaInput",
                class: ""
            }, a),
            i = t(this).find("input[class=recaptcha-btn]");

        // Disable the submit button initially
        i.attr("disabled", "disabled");

        // Add captcha label and input before the submit button
        t('<label id="' + e.idCaptchaText + '"></label>').insertBefore(i);
        t('<input id="' + e.idCaptchaInput + '" aria-label="Captcha Input" class="form-control" type="text" required>').insertBefore(i);

        var d = this.find("#" + e.idCaptchaText),
            s = this.find("#" + e.idCaptchaInput),
            n = Math.floor(10 * Math.random()),
            r = Math.floor(10 * Math.random()),
            c = n + r;

        // Set the captcha text
        t(d).text(n + " + " + r + " =");

        // On keyup, check if the captcha is correct
        t(s).keyup(function() {
            if (t(this).val() == c) {
                // Enable the submit button and add the class if the captcha is correct
                i.removeAttr("disabled").addClass(e.class);
                i.attr("type", "submit");

                // Add the form action attribute
                t(this).closest("form").attr("action", "https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8");
            } else {
                // Disable the submit button and remove the class if the captcha is incorrect
                i.attr("disabled", "disabled").removeClass(e.class);
                i.attr("type", "button");
                t(this).closest("form").attr("action", "");
            }
        });

        return this;
    }
})(jQuery);